---
import Layout from "../layouts/Layout.astro";
import { CA, tg, x, xcommunity, dex, raydium } from "../utils/utils";

---

<Layout
	title="$PEAK - Reach the Summit"
	description="The ultimate memecoin that takes you to the peak. Join the climb to financial freedom."
	keywords="peak, memecoin, defi, solana, crypto, summit, trading, moon"
	canonicalURL=""
	robots="index, follow"
>
  <!-- Intro Screen Overlay -->
  <div id="intro-screen" class="fixed inset-0 z-50 bg-[url('/peak-nocat.png')] bg-cover bg-center flex items-center justify-center cursor-pointer">
    <div class="bg-black bg-opacity-60 backdrop-blur-sm rounded-3xl p-8 text-center text-white mx-8">
      <h1 class="text-6xl font-bold mb-8 text-white animate-pulse drop-shadow-2xl">$PEAK</h1>
      <div class="bg-sky-400 text-black px-8 py-4 rounded-lg text-xl font-bold hover:bg-sky-300 transition-colors duration-300 inline-block shadow-lg">
        Click to Enter
      </div>
    </div>
  </div>

  <!-- Hidden Audio Element -->
  <audio id="background-audio" loop preload="auto">
    <source src="/peak.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <main class="min-h-screen bg-[url('/peak-bg169.png')] bg-cover bg-center relative overflow-hidden flex flex-col justify-between items-center py-8">
    <!-- Hero Section - Top -->
    <div class="text-center px-4 pt-8">
      <h1 class="text-8xl md:text-9xl font-black text-white mb-4 drop-shadow-2xl animate-pulse">
        $PEAK
      </h1>

    </div>

    <!-- Bottom Section -->
    <div class="flex flex-col sm:flex-row items-center gap-1">
      <!-- Contract Address Section -->
      <div class="h-32 bg-black bg-opacity-70 backdrop-blur-sm rounded-2xl p-6 max-w-md w-full mx-4">
        <h3 class="text-white text-lg font-bold mb-3 text-center">Contract Address</h3>
        <div class="flex items-center bg-gray-800 rounded-lg p-3">
          <input 
            type="text" 
            value={CA} 
            readonly 
            class="bg-transparent text-white text-sm flex-1 outline-none font-mono"
            id="contract-address"
          />
          <button 
            id="copy-button"
            class="ml-2 bg-sky-400 hover:bg-sky-300 text-black px-3 py-1 rounded font-bold text-sm transition-colors duration-200"
          >
            Copy
          </button>
        </div>
        <div id="copy-message" class="text-center text-green-400 opacity-0 transition-opacity duration-300 mt-2">Copied to clipboard!</div>

      </div>

      <!-- Social Links Section -->
      <div class="h-32 bg-black bg-opacity-70 backdrop-blur-sm rounded-2xl p-6 max-w-md w-full mx-4">
        <h3 class="text-white text-lg font-bold mb-3 text-center">Join the Community</h3>
        <div class="flex justify-center space-x-6">
          <a href={x} target="_blank" rel="noopener noreferrer" class="transform hover:scale-110 transition-transform duration-200">
            <img src="/social/x2.png" alt="X (Twitter)" class="w-12 h-12 rounded-lg hover:shadow-lg" />
          </a>
          <a href={xcommunity} target="_blank" rel="noopener noreferrer" class="transform hover:scale-110 transition-transform duration-200">
            <img src="/social/community.png" alt="Community" class="w-12 h-12 rounded-lg hover:shadow-lg" />
          </a>
          <a href={dex} target="_blank" rel="noopener noreferrer" class="transform hover:scale-110 transition-transform duration-200">
            <img src="/social/dex.png" alt="DEX" class="w-12 h-12 rounded-lg hover:shadow-lg" />
          </a>
        </div>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const introScreen = document.getElementById('intro-screen');
      const audio = document.getElementById('background-audio') as HTMLAudioElement;
      const copyButton = document.getElementById('copy-button');
      const contractInput = document.getElementById('contract-address') as HTMLInputElement;
      const copyMessage = document.getElementById('copy-message');

      // Handle click on intro screen
      introScreen.addEventListener('click', function() {
        // Hide intro screen
        introScreen.style.display = 'none';
        
        // Play audio
        audio.play().catch(function(error) {
          console.log('Audio playback failed:', error);
        });
      });
      
      // Handle keyboard events (Enter or Space)
      document.addEventListener('keydown', function(event) {
        if (introScreen.style.display !== 'none' && (event.key === 'Enter' || event.key === ' ')) {
          event.preventDefault();
          introScreen.click();
        }
      });

      // Function to copy contract address to clipboard
      copyButton.addEventListener('click', () => {
        if (!navigator.clipboard) {
          // Fallback for browsers that don't support clipboard API
          contractInput.select();
          document.execCommand('copy');
          copyMessage.style.opacity = '1';
          setTimeout(() => {
            copyMessage.style.opacity = '0';
          }, 2000);
          return;
        }

        navigator.clipboard.writeText(contractInput.value).then(() => {
          copyMessage.style.opacity = '1';
          setTimeout(() => {
            copyMessage.style.opacity = '0';
          }, 2000);
        }).catch(err => {
          console.error('Failed to copy text: ', err);
          // Optional: Show an error message to the user
        });
      });
    });
  </script>
</Layout>